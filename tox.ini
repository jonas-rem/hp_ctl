[tox]
envlist = py,check,coverage
skip_missing_interpreters = true
minversion = 4.0

[testenv]
deps = -rrequirements_test.txt
extras = dev
commands = pytest {posargs}

[testenv:coverage]
commands = pytest --cov=src/hp_ctl --cov-report=html --cov-report=term-missing {posargs}

[testenv:check]
commands = ruff check src/hp_ctl tests {posargs}
           mypy src/hp_ctl {posargs}

[testenv:all]
commands = pytest --cov=src/hp_ctl --cov-report=term-missing
           ruff check src/hp_ctl tests
           mypy src/hp_ctl

[pytest]
testpaths = tests
python_files = test_*.py *_test.py
addopts = -v --strict-markers --tb=short

