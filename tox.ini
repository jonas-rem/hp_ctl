[tox]
envlist = coverage,check
skip_missing_interpreters = true
minversion = 4.0

[testenv]
deps = -rrequirements_test.txt
       pytest-html
extras = dev
commands = pytest --html=test_report.html --self-contained-html {posargs}

[testenv:coverage]
deps = -rrequirements_test.txt
       pytest-html
extras = dev
usedevelop = true
commands = pytest --cov=src/hp_ctl --cov-report=html --cov-report=term-missing --html=test_report.html --self-contained-html {posargs}

[testenv:check]
commands = ruff check src/hp_ctl tests {posargs}
           mypy src/hp_ctl {posargs}

[pytest]
testpaths = tests
python_files = test_*.py *_test.py
addopts = -v --strict-markers --tb=short
line-length = 100
