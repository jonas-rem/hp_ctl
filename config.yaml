uart:
  port: /dev/ttyUSB0
  baudrate: 9600

mqtt:
  broker: localhost
  port: 1883

# Logging configuration
# Valid levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
log_level: INFO

limits:
  dhw_target_temp:
    max: 52
    min: 37
  zone1_heat_target_temp:
    max: 37
    min: 25  # Minimum for morning startup (Panasonic protocol min: 20°C)

# Automation configuration (optional)
# Data collection always runs when this section is present.
# The 'enabled' field controls automatic heat pump control mode on startup.
# Mode can be changed at runtime via MQTT: hp_ctl/aquarea_k/automation/mode/set
automation:
  enabled: true # true = automatic control, false = manual (data collection only)

  weather:
    # Weather data from Open-Meteo (free, no API key required)
    # Fetches 24-hour average temperature from the previous day
    # Automatically fetches on startup and daily at midnight (00:00)
    # Get your coordinates from: https://open-meteo.com/
    latitude: 48.94
    longitude: 8.40

  # Mapping outdoor temperature to daily heat requirement
  # System uses linear interpolation between points
  heat_demand_map:
    - outdoor_temp: -10  # °C
      daily_kwh: 90      # kWh required per day
    - outdoor_temp: 18
      daily_kwh: 0

  # Time period when the heat pump should be forced OFF
  # On warmer days, heating start is automatically delayed within this window
  # based on the heat budget (calculated from previous day's temperature)
  night_off_period:
    start: "22:30"
    end: "07:30"

  # Domestic Hot Water (DHW) schedule
  dhw:
    enabled: true
    start_time: "15:00"
    target_temp: 45

  # Parameters for the control algorithm
  ramping:
    min_delta_t: 4.0     # Target delta T (outlet - inlet)

  storage:
    db_path: /var/lib/hp_ctl/automation.db
    retention_days: 30  # Auto-delete data older than this many days
